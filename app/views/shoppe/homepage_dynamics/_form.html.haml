= form_for @homepage_dynamic do |f|
  = f.error_messages

  = field_set_tag t('shoppe.homepage_dynamics.logo') do
    .splitContainer
      %dl.half
        %dt= f.label "attachments[logo_image][file]", t('shoppe.homepage_dynamics.logo_image')
        %dd
          = attachment_preview @homepage_dynamic.logo_image
          %p= f.file_field "attachments[logo_image][file]"
          = f.hidden_field "attachments[logo_image][role]", value: "logo_image"
          = f.hidden_field "attachments[logo_image][parent_id]", value: @homepage_dynamic.id

  = field_set_tag t('shoppe.homepage_dynamics.slider_images') do
    .splitContainer
      %dl.half
        %dt= f.label "attachments[default_image][file]", t('shoppe.homepage_dynamics.default_image')
        %dd
          = attachment_preview @homepage_dynamic.default_image
          %p= f.file_field "attachments[default_image][file]"
          %br
          = f.hidden_field "attachments[default_image][role]", value: "default_image"
          = f.hidden_field "attachments[default_image][parent_id]", value: @homepage_dynamic.id

      %dl.half
        %dt= f.label "attachments[default_image][file]", t('shoppe.products.other_images')
        %dd
          = attachment_preview nil, hide_if_blank: false
          %p= f.file_field "attachments[extra][file]", :multiple => true
          = f.hidden_field "attachments[extra][parent_type]", value: "Shoppe::Product"
          = f.hidden_field "attachments[extra][parent_id]", value: @homepage_dynamic.id
          %br
      - @homepage_dynamic.attachments.each do |attachment|
        - unless ["default_image", "data_sheet", "logo_image"].include?(attachment.role)
          %dl.half
            %dd
              = attachment_preview attachment


  %p.submit
    = f.submit t('shoppe.homepage_dynamics.save'),
               class: 'button green',
               data: {disable_with: (@homepage_dynamic.new_record? ? t('shoppe.homepage_dynamics.creating_homepage_dynamic') : t('shoppe.homepage_dynamics.updating_homepage_dynamic'))}
    = link_to t('shoppe.homepage_dynamics.cancel'), :homepage_dynamics, class: 'button'
